
<!DOCTYPE html>
<html>
<head>

	<title>Map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>


	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		#map {
			width: 600px;
			height: 400px;
		}
    .leaflet-tooltip.my-labels {
      background-color: transparent;
      border: transparent;
      box-shadow: none;
      }
  	</style>

	<style>body { padding: 0; margin: 0; } #map { height: 100%; width: 100vw; }</style>
</head>
<body>

<div id='map'></div>

<script src="csv\convertcsv3.geojson" type="text/javascript"></script>
<script>
	var map = L.map('map').fitWorld();

  L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
    attribution: "<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'>地理院タイル</a>"
  }).addTo(map);

	function onLocationFound(e) {
		var radius = e.accuracy / 2;

		L.marker(e.latlng).addTo(map)
			.bindPopup("You are within " + radius + " meters from this point").openPopup();

		L.circle(e.latlng, radius).addTo(map);
	}

	function onLocationError(e) {
		alert(e.message);
	}

	map.on('locationfound', onLocationFound);
	map.on('locationerror', onLocationError);

	map.locate({setView: true, maxZoom: 16});

  var baseballIcon = L.icon({
		iconUrl: 'baseball-marker.png',
		iconSize: [32, 37],
		iconAnchor: [16, 37],
		popupAnchor: [0, -28]
	});

	function onEachFeature(feature, layer) {
		var popupContent =
      `
      ${feature.properties["Column1.no"]}<br />
      ${feature.properties["Column1.title"]}<br />
      ${feature.properties["Column1.specs.制作年"]}<br />
      ${feature.properties["Column1.specs.エリア"]}<br />
      ${feature.properties["Column1.specs.集落"]}<br />
      ${feature.properties["Column1.specs.マップコード"]}<br />
      `;

		if (feature.properties && feature.properties.popupContent) {
			popupContent += feature.properties.popupContent;
		}

		layer.bindPopup(popupContent);
	}
  var coorsLayer = L.geoJSON(coorsField , {

		pointToLayer: function (feature, latlng) {
      var icon = L.divIcon({
          className: 'meshno',
          html: feature.properties["Column1.no"]
      });
      return L.marker(latlng,/*{icon:icon}*/)
      .bindTooltip(feature.properties["Column1.no"],
      {
        permanent: true,
        direction: "right",
        opacity: 0.7,
       // className: "my-labels"
      });
		},

		onEachFeature: onEachFeature
	}).addTo(map);

</script>


</body>
</html>
